\begin{sequencediagram}
    \newthread{C}{Paramics}{}
    \newinst[2]{B}{Plugin (TraciServer)}{}
    \newthread[3]{A}{OMNeT++/VEINS}{}

    \begin{messcall}{C}{\texttt{run()}}{B}
        \begin{sdblock}{Loop de simulación}{}
            \begin{call}{B}{\texttt{waitForCommands()}}{B}{}
                \postlevel
                \begin{messcall}{A}{Mensaje TraCI}{B}{}
                    \postlevel
                    \begin{sdblock}{Loop de interpretación de comandos}{}
                        \begin{call}{B}{\texttt{parseCommand()}}{B}{Fin de comandos}
                            \begin{call}{B}{API Paramics}{C}{Datos}
                                \postlevel
                            \end{call}
                        \end{call}
                    \end{sdblock}
                \end{messcall}
            
                \begin{call}{B}{\texttt{sendResponse()}}{B}{}
                    \postlevel
                    \begin{messcall}{B}{Respuesta TraCI}{A}
                    \end{messcall}
                \end{call}
            \end{call}
        \end{sdblock}
    \end{messcall}

\end{sequencediagram}